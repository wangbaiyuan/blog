<!DOCTYPE HTML>
<html lang="zh-CN,en,default">

<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="王柏元的博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="https://baiyuan.wang">
    <!--SEO-->

<meta name="keywords" content="android,JAVA,JS" />


<meta name="description" content="WebView是安卓下显示网页的控件，使用它可以实现一个简单的浏览器，访问互联网上的网页。也可以当作一个本地的文本显示控件，和textView类似。用 WebView 或者 TextView 来..." />


<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->

<title>
    
    webview显示富文本与JS和java的交互 |
    
    王柏元的博客 | 博学广问，自律静思
</title>

<link rel="alternate" href="/atom.xml" title="王柏元的博客" type="application/atom+xml">


<link rel="icon" href="/favicon.ico">


    


<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.7.0.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash.css">


<meta name="generator" content="Hexo 6.3.0"></head>

<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
<header class="main-header"  style="background-image:url(
    /img/banner.jpg)"
     >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='Baiyuan Wang'>
            <img src="/img/avatar.jpg?rev=@@hash" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
            <h2>
                博学广问，自律静思
            </h2>
            
        </div>
    </div>
</header>

<nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="https://baiyuan.wang">
                        王柏元的博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa fa-home"></i>
                                首页</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/技术/"><i class="fa fa-shield"></i>
                                技术</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/岁月/"><i class="fa fa-heartbeat"></i>
                                岁月</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/极客视点/"><i class="fa fa-slideshare"></i>
                                观点</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/archives/"><i class="fa fa-history"></i>
                                时间轴</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
<section class="content-wrap">
    <div class="container">
        <div class="row">
            <main class="col-md-8 main-content m-post">
                <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="webview显示富文本与JS和java的交互">
            
            webview显示富文本与JS和java的交互
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a class="tag-none-link" href="/tags/JAVA/" rel="tag">JAVA</a> <a class="tag-none-link" href="/tags/JS/" rel="tag">JS</a> <a class="tag-none-link" href="/tags/android/" rel="tag">android</a>
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2016/01/15</span>
    </span>
    
    
</div>
        
        
    </div>
    
    <div class="post-body post-content">
        <p>WebView是安卓下显示网页的控件，使用它可以实现一个简单的浏览器，访问互联网上的网页。也可以当作一个本地的文本显示控件，和textView类似。用 WebView 或者 TextView 来显示 HTML 内容，其交互的实现方式有较大的区别，以在 HTML 内容中的图片点击事件为例，在 WebView 模式下，开发人员需要通过注入 JavaScript 代码来进行点击事件的响应，Android 系统提供了 WebView 中 JavaScript 网页脚本调用 Java 类方法的机制；而在 TextView 中，图片会被解析为 ImageSpan，通过在 ImageSpan 上注册点击事件来响应。 <a href="http://baiyuan.wang/wp-content/uploads/2016/01/baiyuan.wang_2016-01-15_13-54-57.jpg"><img src="http://baiyuan.wang/wp-content/uploads/2016/01/baiyuan.wang_2016-01-15_13-54-57.jpg" alt="webview显示富文本"></a> webview显示富文本  </p>
<h2 id="一、webview显示富文本"><a href="#一、webview显示富文本" class="headerlink" title="一、webview显示富文本"></a>一、webview显示富文本</h2><p>比如iniHtml为一段String类型的html代码，使用</p>
<p>webView.loadDataWithBaseURL(null, iniHtml, “text&#x2F;html”, “utf-8”, null);</p>
<p>即可在webview上显示这段html。  </p>
<h2 id="二、webview显示项目资源中网页文件"><a href="#二、webview显示项目资源中网页文件" class="headerlink" title="二、webview显示项目资源中网页文件"></a>二、webview显示项目资源中网页文件</h2><p>我们可以将一个html文件index.html放在项目的assets文件下，使用WebView.loadUrl(“file:&#x2F;&#x2F;&#x2F;android_asset&#x2F;index.html”)来显示这个html文件，在这个html文件如果要引用asserts文件夹下的css、js文件，同样使用file:&#x2F;&#x2F;&#x2F;android_asset&#x2F; ; 来访问。</p>
<pre><code>&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0&quot;&gt;
&lt;title&gt;王柏元的博客&lt;/title&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;file:///android_asset/style.css&quot;/&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;file:///android_asset/scripts/jquery.js&quot;&gt;&lt;/script&gt;
</code></pre>
<h2 id="三、java中调用javascript函数"><a href="#三、java中调用javascript函数" class="headerlink" title="三、java中调用javascript函数"></a>三、java中调用javascript函数</h2><p>使用loadurl调用java代码</p>
<p>webview.loadUrl(“javascript: window.backAction();”);</p>
<h2 id="四、javascript怎样调用java函数"><a href="#四、javascript怎样调用java函数" class="headerlink" title="四、javascript怎样调用java函数"></a>四、javascript怎样调用java函数</h2><p>在webview使用javascript调用外部的java函数可以让android的webview显示富文本有一种更加原生的体验，而不会让使用者感觉他在使用一个浏览器在查看你的显示文本。为了能让javascript调用java中代码，安卓采取将javascript的一个window下的对象M与java中的对象N做一个绑定或者说是映射，这样在javascript下对M的操作就相当于在java下N的操作。</p>
<h3 id="实现方法：webview启用javascript，绑定js对象"><a href="#实现方法：webview启用javascript，绑定js对象" class="headerlink" title="实现方法：webview启用javascript，绑定js对象"></a>实现方法：webview启用javascript，绑定js对象</h3><p>webview.getSettings().setJavaScriptEnabled(true);<br>webview.addJavascriptInterface(javaobject,”JSInterface”);</p>
<p>addJavascriptInterface(Object object, String name)函数中第一个参数object是java下的对象，name是映射到javascript下的对象名。你可以为java下的object比如当前的activity申明一个click()函数，在javascript下使用window.name.click() 即可出发java下click函数。 需要指出的是在java中的click函数需要添加声明 @JavascriptInterface</p>

    </div>
    
    <div class="post-footer">
        <div>
            
            转载声明：
            商业转载请联系获得授权 ©<a href="/" target="_blank">王柏元的博客</a>, <b>非商业转载请务必注明: </b></br>
原文出处：
                <a href="https://baiyuan.wang/webview-shows-rich-text-interact-with-js-java.html" target="_blank">王柏元的博客 >> webview显示富文本与JS和java的交互</a>
            
            
        </div>
        <div>
            
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/baidu-map-api-position-offset-calibration-algorithm.html" class="pre-post btn btn-default" title='百度地图API位置偏移的校准算法'>
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
        <span class="hidden-xs">
            百度地图API位置偏移的校准算法</span>
    </a>
    
    
    <a href="/page-add-links-call-app-jump-download-url.html" class="next-post btn btn-default" title='网页添加链接调用APP与跳转下载网址'>
        <span class="hidden-lg">下一篇</span>
        <span class="hidden-xs">
            网页添加链接调用APP与跳转下载网址</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

<div id="comments">
    
<script src="https://cdn.bootcdn.net/ajax/libs/gitalk/1.7.2/gitalk.min.js"></script>
<link href="https://cdn.bootcdn.net/ajax/libs/gitalk/1.7.2/gitalk.min.css" rel="stylesheet">
<div id="gitalk-container">
    <div class="gt-container detail">
    
</div>

</div>
<script type="text/javascript">
var gitalk = new Gitalk({
    // Gitalk配置
    language: "zh-CN,en,default",
    clientID: "8fbc26599e94fd5e4f2d",
    clientSecret: "16d6dc93d6a850229a9fd96c74096bd5d491eb82",
    repo: "blog",
    owner: "wangbaiyuan",
    admin: ["geekeren"],
    id: "26692",
    distractionFreeMode: "true"
});
gitalk.render('gitalk-container');
</script>


    <div class="gt-container detail">
    
        <div class="gt-comments">
            <div style="position: relative;">
                <div class="gt-comment gt-comment-admin" style="transform-origin: center top;">
                    
                        <div class="gt-avatar gt-comment-avatar">
                            <img src="https://wangbaiyuan.cn/wp-content/avatars/02f52479421f62c2fea6a39d89d6c960.png"
                                 alt="@vultr">
                        </div>
                    

                    <div class="gt-comment-content">
                        <div class="gt-comment-header">
                            <div class="gt-comment-block-2"></div>
                            <a class="gt-comment-username">
                                vultr
                            </a>
                            
                                <span class="gt-comment-text">commented at</span>
                            
                            <span class="gt-comment-date">
                                2016-04-08
                            </span>
                        </div>
                        <div class="gt-comment-body markdown-body">
                            <p>
                                兄弟，交换链接吗？
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
</div>

</div>


            </main>
            
                <aside class="col-md-4 sidebar">
    
<div class="widget">
    <h3 class="title">
        关注我
    </h3>
    <div class="content follow_me">
        
        <a href="//github.com/geekeren" rel="external nofollow" title="github" target="_blank" class="github">
            <i class="github fa fa-github"></i>
        </a>
        
        <a href="mailto:me@mail.wangbaiyuan.cn" rel="external nofollow" title="email" target="_blank" class="email">
            <i class="envelope-o fa fa-envelope-o"></i>
        </a>
        
        <a href="//weibo.com/3734351975" rel="external nofollow" title="weibo" target="_blank" class="weibo">
            <i class="weibo fa fa-weibo"></i>
        </a>
        
        <a href="/atom.xml" rel="external nofollow" title="rss" target="_blank" class="rss">
            <i class="feed fa fa-feed"></i>
        </a>
        
    </div>
</div>


    
    <div class="widget">
        <h3 class="title">
            订阅微信公众号
        </h3>
        <div class="content subscribe_wechat">
            <div>
                <img
                        width="200"
                        src="/img/wechat.jpg" alt="扫一扫关注<br/>
《我是极客人》微信公众号
"
                />
            </div>
            <div>
                扫一扫关注<br/>
《我是极客人》微信公众号

            </div>
        </div>
    </div>


</aside>


<aside id="article-toc" role="navigation" class="col-md-4 sidebar scroll-fix">
    <div class="widget">
        <h3 class="title">
            文章目录
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81webview%E6%98%BE%E7%A4%BA%E5%AF%8C%E6%96%87%E6%9C%AC"><span class="toc-text">一、webview显示富文本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81webview%E6%98%BE%E7%A4%BA%E9%A1%B9%E7%9B%AE%E8%B5%84%E6%BA%90%E4%B8%AD%E7%BD%91%E9%A1%B5%E6%96%87%E4%BB%B6"><span class="toc-text">二、webview显示项目资源中网页文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81java%E4%B8%AD%E8%B0%83%E7%94%A8javascript%E5%87%BD%E6%95%B0"><span class="toc-text">三、java中调用javascript函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81javascript%E6%80%8E%E6%A0%B7%E8%B0%83%E7%94%A8java%E5%87%BD%E6%95%B0"><span class="toc-text">四、javascript怎样调用java函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%EF%BC%9Awebview%E5%90%AF%E7%94%A8javascript%EF%BC%8C%E7%BB%91%E5%AE%9Ajs%E5%AF%B9%E8%B1%A1"><span class="toc-text">实现方法：webview启用javascript，绑定js对象</span></a></li></ol></li></ol>
        
    </div>
</aside>



            
        </div>
    </div>
</section>
<footer class="main-footer">
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <span>&copy;
                    2014 - 2024
                    <a href="https://baiyuan.wang" target="_blank">王柏元的博客</a>
                    <a href="//beian.miit.gov.cn/" target="_blank" rel="nofollow">
                        鄂ICP备2022019264号-1</a>
                    
                </span>|
                <span>
                   
    <script
            type="text/javascript"
            src="https://s4.cnzz.com/z_stat.php?id=1254162355&web_id=1254162355"
    >
    </script>





                </span>|
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span>|
                <span>
                    Theme by <a href="https://github.com/geekeren/hexo-theme-snippet-pro" class="copyright-links"
                                target="_blank" rel="nofollow">Snippet Pro</a>
                </span>
            </div>
        </div>
    </div>
</div>




<script src="/js/app.js?rev=@@hash.js"></script>


    

    <a id="back-to-top" class="icon-btn hide">
        <i class="fa fa-chevron-up"></i>
    </a>
</footer>

</body>
</html>
