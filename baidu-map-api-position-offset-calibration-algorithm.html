<!DOCTYPE HTML>
<html lang="zh-CN,en,default">

<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="王柏元的博客">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/">
    <link rel="dns-prefetch" href="https://baiyuan.wang">
    <!--SEO-->

<meta name="keywords" content="Web,C++,微信,android开发,API,JAVA" />


<meta name="description" content="在开始使用百度地图API进行开发时可能会遇到一件相当奇怪的事情，使用百度定位的经纬度在地图上显示相当不准确，这一问题我在微信开发和安卓开始时都遇到过。第一次使用百度地图api获取位置并在地图上显..." />


<meta name="robots" content="all" />
<meta name="google" content="all" />
<meta name="googlebot" content="all" />
<meta name="verify" content="all" />
    <!--Title-->

<title>
    
    百度地图API位置偏移的校准算法 |
    
    王柏元的博客 | 博学广问，自律静思
</title>

<link rel="alternate" href="/atom.xml" title="王柏元的博客" type="application/atom+xml">


<link rel="icon" href="/favicon.ico">


    


<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.7.0.css">
<link rel="stylesheet" href="/css/style.css?rev=@@hash.css">


<meta name="generator" content="Hexo 6.3.0"></head>

<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->
<body>
<header class="main-header"  style="background-image:url(
    /img/banner.jpg)"
     >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='Baiyuan Wang'>
            <img src="/img/avatar.jpg?rev=@@hash" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
            <!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
            <h2>
                博学广问，自律静思
            </h2>
            
        </div>
    </div>
</header>

<nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                        <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="https://baiyuan.wang">
                        王柏元的博客</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                        <li role="presentation" class="text-center">
                            <a href="/"><i class="fa fa-home"></i>
                                首页</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/技术/"><i class="fa fa-shield"></i>
                                技术</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/岁月/"><i class="fa fa-heartbeat"></i>
                                岁月</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/categories/极客视点/"><i class="fa fa-slideshare"></i>
                                观点</a>
                        </li>
                        
                        <li role="presentation" class="text-center">
                            <a href="/archives/"><i class="fa fa-history"></i>
                                时间轴</a>
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
<section class="content-wrap">
    <div class="container">
        <div class="row">
            <main class="col-md-8 main-content m-post">
                <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="百度地图API位置偏移的校准算法">
            
            百度地图API位置偏移的校准算法
            
        </h1>
        <div class="post-meta">
    
    <span class="categories-meta fa-wrap">
        <i class="fa fa-folder-open-o"></i>
        <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a> <a class="category-link" href="/categories/%E6%8A%80%E6%9C%AF/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            <a class="tag-none-link" href="/tags/API/" rel="tag">API</a> <a class="tag-none-link" href="/tags/C/" rel="tag">C++</a> <a class="tag-none-link" href="/tags/JAVA/" rel="tag">JAVA</a> <a class="tag-none-link" href="/tags/Web/" rel="tag">Web</a> <a class="tag-none-link" href="/tags/android%E5%BC%80%E5%8F%91/" rel="tag">android开发</a>
            
        </span>
    </span>
    
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta">
            2016/02/17</span>
    </span>
    
    
</div>
        
        
    </div>
    
    <div class="post-body post-content">
        <p>在开始使用百度地图API进行开发时可能会遇到一件相当奇怪的事情，使用百度定位的经纬度在地图上显示相当不准确，这一问题我在微信开发和安卓开始时都遇到过。第一次使用百度地图api获取位置并在地图上显示是在微信开发的时候，那是不知道具体原因无奈在微信获取的地理位置上加了一个偏移量进行校准，虽能勉强解决，但是不太准确。后来在安卓开始也同样遇到了这个问题，才发现百度地图API定位偏移已经不是一个偶然问题了。</p>
<h2 id="百度地图API定位偏移的原因"><a href="#百度地图API定位偏移的原因" class="headerlink" title="百度地图API定位偏移的原因"></a>百度地图API定位偏移的原因</h2><p>以下来自互联网：</p>
<h3 id="一、坐标体系"><a href="#一、坐标体系" class="headerlink" title="一、坐标体系"></a><strong>一、坐标体系</strong></h3><p>首先我们要明白，开发者能接触到哪些坐标体系呢？</p>
<h4 id="第一种分类："><a href="#第一种分类：" class="headerlink" title="第一种分类："></a>第一种分类：</h4><p>1、 GPS，WGS-84，原始坐标体系。一般用国际标准的GPS记录仪记录下来的坐标，都是GPS的坐标。很可惜，在中国，任何一个地图产品都不允许使用GPS坐标，据说是为了保密。GPS坐标形式如图，度分秒形式的经纬度： <a href="http://baiyuan.wang/wp-content/uploads/2016/02/baiyuan.wang_2016-02-17_12-15-34.jpg"><img src="http://baiyuan.wang/wp-content/uploads/2016/02/baiyuan.wang_2016-02-17_12-15-34.jpg" alt="百度地图API位置偏移的校准算法1"></a></p>
<p>百度地图API位置偏移的校准算法1</p>
<p> <a href="http://baiyuan.wang/wp-content/uploads/2016/02/baiyuan.wang_2016-02-17_12-15-54.jpg"><img src="http://baiyuan.wang/wp-content/uploads/2016/02/baiyuan.wang_2016-02-17_12-15-54.jpg" alt="百度地图API位置偏移的校准算法2"></a></p>
<p> 百度地图API位置偏移的校准算法2</p>
<p>  2、 GCJ-02，国测局02年发布的坐标体系。又称“火星坐标”。在中国，必须至少使用GCJ-02的坐标体系。比如谷歌，腾讯，高德都在用这个坐标体系。<strong>GCJ-02****也是国内最广泛使用的坐标体系</strong>。 3、 其他坐标体系。一般都是由GCJ-02进过偏移算法得到的。这种体系就根据每个公司的不同，坐标体系都不一样了。比如，百度和搜狗就使用自己的坐标体系，与其他坐标体系不兼容。</p>
<h4 id="第二种分类："><a href="#第二种分类：" class="headerlink" title="第二种分类："></a>第二种分类：</h4><p>首先明白，所有坐标体系的原点，都是非洲。 <a href="http://baiyuan.wang/wp-content/uploads/2016/02/baiyuan.wang_2016-02-17_12-16-11.jpg"><img src="http://baiyuan.wang/wp-content/uploads/2016/02/baiyuan.wang_2016-02-17_12-16-11.jpg" alt="百度地图API位置偏移的校准算法3"></a> 百度地图API位置偏移的校准算法3 1、 经纬度。这个是球面坐标，对于北京来说，就是(116.38817139.935961)这样的坐标。比如腾讯、高德、百度都是这样的经纬度坐标。谷歌是经纬度顺序写反的经纬度坐标。 如果是度分秒坐标，需要进行转换，才能得到这样的经纬度坐标。详见坐标转换。 2、 墨卡托坐标。平面坐标，相当于是直线距离，数字一般都比较大，像这样的。(215362.00021333335 99526.00034912192) 墨卡托坐标，主要用于程序的后台计算。直线距离嘛，加加减减几乎计算方便。 搜狗地图API就是直接使用的墨卡托坐标。</p>
<h3 id="二、坐标转换"><a href="#二、坐标转换" class="headerlink" title="二、坐标转换"></a><strong>二、坐标转换</strong></h3><p>在各种web端平台，或者高德、腾讯、百度上取到的坐标，都不是GPS坐标，都是GCJ-02坐标，或者自己的偏移坐标系。 比如，你在谷歌地图API，高德地图API，腾讯地图API上取到的，都是GCJ-02坐标，他们三家都是通用的，也适用于大部分地图API产品，以及他们的地图产品。 例外，百度API上取到的，是BD-09坐标，只适用于百度地图相关产品。 例外，搜狗API上取到的，是搜狗坐标，只适用于搜狗地图相关产品。 例外，谷歌地球，google earth上取到的，是GPS坐标，而且是度分秒形式的经纬度坐标。在国内不允许使用。必须转换为GCJ-02坐标。</p>
<h4 id="1、度分秒坐标转换为经纬度"><a href="#1、度分秒坐标转换为经纬度" class="headerlink" title="1、度分秒坐标转换为经纬度"></a>1、度分秒坐标转换为经纬度</h4><p>比如，在GPS记录仪，或者google earth上采集到的是39°31’20.51，那么应该这样换算，31分就是31&#x2F;60度，20.51秒就是20.51&#x2F;3600度，结果就是39 + 31&#x2F;60 + 20.51&#x2F;3600 度。</p>
<h4 id="2、-GPS转换为GCJ-02坐标"><a href="#2、-GPS转换为GCJ-02坐标" class="headerlink" title="2、 GPS转换为GCJ-02坐标"></a>2、 GPS转换为GCJ-02坐标</h4><p>谷歌，高德，腾讯的地图API官网上，都不直接提供这样的坐标转换。如果要得到GCJ-02坐标，最好在他们的地图上直接取点，或者通过地址解析得到。（这个工具我后续会贴出来的。我就爱干这样的事情，哈哈。） 不过，在网上搜到了这样的接口，该接口的type&#x3D;1就是GPS转到GCJ-02的墨卡托坐标。请大家对接口保密，哈哈。详见： <a target="_blank" rel="noopener" href="http://map.sogou.com/api/documentation/javascript/api2.5/interface/_translate.html#late\_intro">http://map.sogou.com/api/documentation/javascript/api2.5/interface\_translate.html#late\_intro</a></p>
<h4 id="3、GCJ-02与BD-09之间互转"><a href="#3、GCJ-02与BD-09之间互转" class="headerlink" title="3、GCJ-02与BD-09之间互转"></a>3、GCJ-02与BD-09之间互转</h4><p>国测局GCJ-02坐标体系（谷歌、高德、腾讯），与百度坐标BD-09体系的转换，在CSDN上有很详细的讲解： <a target="_blank" rel="noopener" href="http://blog.csdn.net/coolypf/article/details/8569813">http://blog.csdn.net/coolypf/article/details/8569813</a> 不过也有更简单的算法，线性算法（lat和lng是经纬度，球面坐标）： To_B是转到百度，To_G是转到GCJ-02。 var TO_BLNG &#x3D; function(lng){return lng+0.0065;}; var TO_BLAT &#x3D; function(lat){return lat+0.0060;}; var TO_GLNG &#x3D; function(lng){return lng-0.0065;}; var TO_GLAT &#x3D; function(lat){return lat-0.0060;};</p>
<h4 id="4、经纬纬度转成墨卡托"><a href="#4、经纬纬度转成墨卡托" class="headerlink" title="4、经纬纬度转成墨卡托"></a>4、经纬纬度转成墨卡托</h4><p>网上也有详细讲解： <a target="_blank" rel="noopener" href="http://bbs.esrichina-bj.cn/esri/viewthread.php?tid=78245">http://bbs.esrichina-bj.cn/esri/viewthread.php?tid=78245</a> （大家发现没，高德是api，腾讯和百度是mapapi，说明什么？） <strong>三、坐标偏移</strong> 如果您的坐标在转换之后，还有偏移，那么考虑以下几个方面。 A、原始坐标系弄错，比如以为自己是GPS坐标，但其实已经是GCJ-02坐标。 解决方案：请确保采集到的数据是哪个坐标体系，需要转换到哪个坐标系，再进行坐标转换。 B、原始坐标准确度不够 解决方案：如果您是GPS坐标，请确保采集GPS数据时，搜到至少4颗以上的卫星。并且GPS数据准不准，还取决于周围建筑物的高度，越高越不准，因为有遮挡。 如果本来就是GCJ-02坐标，在不同地图放大级别的时候，看到的地方可能不一样。比如你在地图级别4（国家）取到的坐标，放大到地图12级（街道）时，坐标就偏了。请确保在地图最大放大级别时，拾取坐标。 C、度分秒的概念混淆 比如，在google earth上采集到的是39°31’20.51，那么应该这样换算，31分就是31&#x2F;60度，20.51秒就是20.51&#x2F;3600度，结果就是39 + 31&#x2F;60 + 20.51&#x2F;3600 度。 D、经纬度顺序写反了 有些公司（比如高德，百度，腾讯）是先经度，再纬度，即Point(lng lat)。但谷歌坐标的顺序恰好相反，是(lat lng)。 相关问题的<a target="_blank" rel="noopener" href="http://developer.baidu.com/map/question.htm">百度解释：http://developer.baidu.com/map/question.htm</a></p>
<h2 id="百度地图API位置偏移的校准算法"><a href="#百度地图API位置偏移的校准算法" class="headerlink" title="百度地图API位置偏移的校准算法"></a>百度地图API位置偏移的校准算法</h2><p>package cn.wangbaiyuan.translate.tools;</p>
<p>&#x2F;**<br> * 各地图API坐标系统比较与转换;<br> * WGS84坐标系：即地球坐标系，国际上通用的坐标系。设备一般包含GPS芯片或者北斗芯片获取的经纬度为WGS84地理坐标系,<br> * 谷歌地图采用的是WGS84地理坐标系（中国范围除外）;<br> * GCJ02坐标系：即火星坐标系，是由中国国家测绘局制订的地理信息系统的坐标系统。由WGS84坐标系经加密后的坐标系。<br> * 谷歌中国地图和搜搜中国地图采用的是GCJ02地理坐标系; BD09坐标系：即百度坐标系，GCJ02坐标系经加密后的坐标系;<br> * 搜狗坐标系、图吧坐标系等，估计也是在GCJ02基础上加密而成的。 chenhua<br> *&#x2F;<br>public class PositionUtil {</p>
<pre><code>public static final String BAIDU\_LBS\_TYPE = &quot;bd09ll&quot;;

public static double pi = 3.1415926535897932384626;
public static double a = 6378245.0;
public static double ee = 0.00669342162296594323;

/\*\*
 \* 84 to 火星坐标系 (GCJ-02) World Geodetic System ==&gt; Mars Geodetic System
 \*
 \* @param lat
 \* @param lon
 \* @return
 */
public static Gps gps84\_To\_Gcj02(double lat, double lon) &#123;
    if (outOfChina(lat, lon)) &#123;
        return null;
    &#125;
    double dLat = transformLat(lon - 105.0, lat - 35.0);
    double dLon = transformLon(lon - 105.0, lat - 35.0);
    double radLat = lat / 180.0 * pi;
    double magic = Math.sin(radLat);
    magic = 1 - ee * magic * magic;
    double sqrtMagic = Math.sqrt(magic);
    dLat = (dLat * 180.0) / ((a * (1 - ee)) / (magic * sqrtMagic) * pi);
    dLon = (dLon * 180.0) / (a / sqrtMagic * Math.cos(radLat) * pi);
    double mgLat = lat + dLat;
    double mgLon = lon + dLon;
    return new Gps(mgLat, mgLon);
&#125;

/\*\*
 \* \* 火星坐标系 (GCJ-02) to 84 * * @param lon * @param lat * @return
 \* */
public static Gps gcj\_To\_Gps84(double lat, double lon) &#123;
    Gps gps = transform(lat, lon);
    double lontitude = lon * 2 - gps.getWgLon();
    double latitude = lat * 2 - gps.getWgLat();
    return new Gps(latitude, lontitude);
&#125;

/\*\*
 \* 火星坐标系 (GCJ-02) 与百度坐标系 (BD-09) 的转换算法 将 GCJ-02 坐标转换成 BD-09 坐标
 \*
 \* @param gg_lat
 \* @param gg_lon
 */
public static Gps gcj02\_To\_Bd09(double gg\_lat, double gg\_lon) &#123;
    double x = gg\_lon, y = gg\_lat;
    double z = Math.sqrt(x * x + y * y) + 0.00002 * Math.sin(y * pi);
    double theta = Math.atan2(y, x) + 0.000003 * Math.cos(x * pi);
    double bd_lon = z * Math.cos(theta) + 0.0065;
    double bd_lat = z * Math.sin(theta) + 0.006;
    return new Gps(bd\_lat, bd\_lon);
&#125;

/\*\*
 \* \* 火星坐标系 (GCJ-02) 与百度坐标系 (BD-09) 的转换算法 * * 将 BD-09 坐标转换成GCJ-02 坐标 * * @param
 \* bd\_lat * @param bd\_lon * @return
 */
public static Gps bd09\_To\_Gcj02(double bd\_lat, double bd\_lon) &#123;
    double x = bd\_lon - 0.0065, y = bd\_lat - 0.006;
    double z = Math.sqrt(x * x + y * y) - 0.00002 * Math.sin(y * pi);
    double theta = Math.atan2(y, x) - 0.000003 * Math.cos(x * pi);
    double gg_lon = z * Math.cos(theta);
    double gg_lat = z * Math.sin(theta);
    return new Gps(gg\_lat, gg\_lon);
&#125;

/\*\*
 \* (BD-09)--&gt;84
 \* @param bd_lat
 \* @param bd_lon
 \* @return
 */
public static Gps bd09\_To\_Gps84(double bd\_lat, double bd\_lon) &#123;

    Gps gcj02 = PositionUtil.bd09\_To\_Gcj02(bd\_lat, bd\_lon);
    Gps map84 = PositionUtil.gcj\_To\_Gps84(gcj02.getWgLat(),
            gcj02.getWgLon());
    return map84;

&#125;

public static boolean outOfChina(double lat, double lon) &#123;
    if (lon &lt; 72.004 || lon &gt; 137.8347)
        return true;
    if (lat &lt; 0.8293 || lat &gt; 55.8271)
        return true;
    return false;
&#125;

public static Gps transform(double lat, double lon) &#123;
    if (outOfChina(lat, lon)) &#123;
        return new Gps(lat, lon);
    &#125;
    double dLat = transformLat(lon - 105.0, lat - 35.0);
    double dLon = transformLon(lon - 105.0, lat - 35.0);
    double radLat = lat / 180.0 * pi;
    double magic = Math.sin(radLat);
    magic = 1 - ee * magic * magic;
    double sqrtMagic = Math.sqrt(magic);
    dLat = (dLat * 180.0) / ((a * (1 - ee)) / (magic * sqrtMagic) * pi);
    dLon = (dLon * 180.0) / (a / sqrtMagic * Math.cos(radLat) * pi);
    double mgLat = lat + dLat;
    double mgLon = lon + dLon;
    return new Gps(mgLat, mgLon);
&#125;

public static double transformLat(double x, double y) &#123;
    double ret = -100.0 + 2.0 * x + 3.0 * y + 0.2 * y * y + 0.1 * x * y
            \+ 0.2 * Math.sqrt(Math.abs(x));
    ret += (20.0 * Math.sin(6.0 * x * pi) + 20.0 * Math.sin(2.0 * x * pi)) * 2.0 / 3.0;
    ret += (20.0 * Math.sin(y * pi) + 40.0 * Math.sin(y / 3.0 * pi)) * 2.0 / 3.0;
    ret += (160.0 * Math.sin(y / 12.0 * pi) + 320 * Math.sin(y * pi / 30.0)) * 2.0 / 3.0;
    return ret;
&#125;

public static double transformLon(double x, double y) &#123;
    double ret = 300.0 + x + 2.0 * y + 0.1 * x * x + 0.1 * x * y + 0.1
            \* Math.sqrt(Math.abs(x));
    ret += (20.0 * Math.sin(6.0 * x * pi) + 20.0 * Math.sin(2.0 * x * pi)) * 2.0 / 3.0;
    ret += (20.0 * Math.sin(x * pi) + 40.0 * Math.sin(x / 3.0 * pi)) * 2.0 / 3.0;
    ret += (150.0 * Math.sin(x / 12.0 * pi) + 300.0 * Math.sin(x / 30.0
            \* pi)) * 2.0 / 3.0;
    return ret;
&#125;

public static void main(String\[\] args) &#123;

    // 北斗芯片获取的经纬度为WGS84地理坐标 31.426896,119.496145
    Gps gps = new Gps(31.426896, 119.496145);
    System.out.println(&quot;gps :&quot; + gps);
    Gps gcj = gps84\_To\_Gcj02(gps.getWgLat(), gps.getWgLon());
    System.out.println(&quot;gcj :&quot; + gcj);
    Gps star = gcj\_To\_Gps84(gcj.getWgLat(), gcj.getWgLon());
    System.out.println(&quot;star:&quot; + star);
    Gps bd = gcj02\_To\_Bd09(gcj.getWgLat(), gcj.getWgLon());
    System.out.println(&quot;bd  :&quot; + bd);
    Gps gcj2 = bd09\_To\_Gcj02(bd.getWgLat(), bd.getWgLon());
    System.out.println(&quot;gcj :&quot; + gcj2);
&#125;
</code></pre>
<p>}</p>
<h3 id="C-算法"><a href="#C-算法" class="headerlink" title="C++算法"></a>C++算法</h3><p>#include   </p>
<p>const double x_pi &#x3D; 3.14159265358979324 * 3000.0 &#x2F; 180.0;  </p>
<p>void bd_encrypt(double gg_lat, double gg_lon, double &amp;bd_lat, double &amp;bd_lon)<br>{<br>    double x &#x3D; gg_lon, y &#x3D; gg_lat;<br>    double z &#x3D; sqrt(x * x + y * y) + 0.00002 * sin(y * x_pi);<br>    double theta &#x3D; atan2(y, x) + 0.000003 * cos(x * x_pi);<br>    bd_lon &#x3D; z * cos(theta) + 0.0065;<br>    bd_lat &#x3D; z * sin(theta) + 0.006;<br>}  </p>
<p>void bd_decrypt(double bd_lat, double bd_lon, double &amp;gg_lat, double &amp;gg_lon)<br>{<br>    double x &#x3D; bd_lon - 0.0065, y &#x3D; bd_lat - 0.006;<br>    double z &#x3D; sqrt(x * x + y * y) - 0.00002 * sin(y * x_pi);<br>    double theta &#x3D; atan2(y, x) - 0.000003 * cos(x * x_pi);<br>    gg_lon &#x3D; z * cos(theta);<br>    gg_lat &#x3D; z * sin(theta);<br>}</p>

    </div>
    
    <div class="post-footer">
        <div>
            
            转载声明：
            商业转载请联系获得授权 ©<a href="/" target="_blank">王柏元的博客</a>, <b>非商业转载请务必注明: </b></br>
原文出处：
                <a href="https://baiyuan.wang/baidu-map-api-position-offset-calibration-algorithm.html" target="_blank">王柏元的博客 >> 百度地图API位置偏移的校准算法</a>
            
            
        </div>
        <div>
            
        </div>
    </div>
</article>
<div class="article-nav prev-next-wrap clearfix">
    
    <a href="/language-java-1-difference-between-equal.html" class="pre-post btn btn-default" title='【语言-java】1、"=="和"equal"的区别'>
        <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
        <span class="hidden-xs">
            【语言-java】1、"=="和"equal"的区别</span>
    </a>
    
    
    <a href="/webview-shows-rich-text-interact-with-js-java.html" class="next-post btn btn-default" title='webview显示富文本与JS和java的交互'>
        <span class="hidden-lg">下一篇</span>
        <span class="hidden-xs">
            webview显示富文本与JS和java的交互</span><i class="fa fa-angle-right fa-fw"></i>
    </a>
    
</div>

<div id="comments">
    
<script src="https://cdn.bootcdn.net/ajax/libs/gitalk/1.7.2/gitalk.min.js"></script>
<link href="https://cdn.bootcdn.net/ajax/libs/gitalk/1.7.2/gitalk.min.css" rel="stylesheet">
<div id="gitalk-container">
    <div class="gt-container detail">
    
</div>

</div>
<script type="text/javascript">
var gitalk = new Gitalk({
    // Gitalk配置
    language: "zh-CN,en,default",
    clientID: "8fbc26599e94fd5e4f2d",
    clientSecret: "16d6dc93d6a850229a9fd96c74096bd5d491eb82",
    repo: "blog",
    owner: "wangbaiyuan",
    admin: ["geekeren"],
    id: "48033",
    distractionFreeMode: "true"
});
gitalk.render('gitalk-container');
</script>


    <div class="gt-container detail">
    
        <div class="gt-comments">
            <div style="position: relative;">
                <div class="gt-comment gt-comment-admin" style="transform-origin: center top;">
                    
                        <div class="gt-avatar gt-comment-avatar">
                            <img src="https://wangbaiyuan.cn/wp-content/avatars/7a1e26ab2a0cf203f5de9d0cddfea25e.png"
                                 alt="@极客人">
                        </div>
                    

                    <div class="gt-comment-content">
                        <div class="gt-comment-header">
                            <div class="gt-comment-block-2"></div>
                            <a class="gt-comment-username">
                                极客人
                            </a>
                            
                                <span class="gt-comment-text">commented at</span>
                            
                            <span class="gt-comment-date">
                                2018-12-20
                            </span>
                        </div>
                        <div class="gt-comment-body markdown-body">
                            <p>
                                不好意思，这边文章有点历史就远了。你试着看自己能不能写一个？应该不会太复杂。
构造函数
+ Gps(latitude, lontitude);
方法：
+ double getWgLon();
+ double getWgLat();
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
        <div class="gt-comments">
            <div style="position: relative;">
                <div class="gt-comment gt-comment-admin" style="transform-origin: center top;">
                    
                        <div class="gt-avatar gt-comment-avatar">
                            <img src="https://wangbaiyuan.cn/wp-content/avatars/0e300a402c504e8bff28331743dcac57.png"
                                 alt="@AlxeMJ">
                        </div>
                    

                    <div class="gt-comment-content">
                        <div class="gt-comment-header">
                            <div class="gt-comment-block-2"></div>
                            <a class="gt-comment-username">
                                AlxeMJ
                            </a>
                            
                                <span class="gt-comment-text">commented at</span>
                            
                            <span class="gt-comment-date">
                                2018-12-20
                            </span>
                        </div>
                        <div class="gt-comment-body markdown-body">
                            <p>
                                我邮箱：739723685@qq.com
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
        <div class="gt-comments">
            <div style="position: relative;">
                <div class="gt-comment gt-comment-admin" style="transform-origin: center top;">
                    
                        <div class="gt-avatar gt-comment-avatar">
                            <img src="https://wangbaiyuan.cn/wp-content/avatars/0e300a402c504e8bff28331743dcac57.png"
                                 alt="@AlxeMJ">
                        </div>
                    

                    <div class="gt-comment-content">
                        <div class="gt-comment-header">
                            <div class="gt-comment-block-2"></div>
                            <a class="gt-comment-username">
                                AlxeMJ
                            </a>
                            
                                <span class="gt-comment-text">commented at</span>
                            
                            <span class="gt-comment-date">
                                2018-12-20
                            </span>
                        </div>
                        <div class="gt-comment-body markdown-body">
                            <p>
                                大佬，这个Gps类是哪个jar包，能否提供一下？
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
</div>

</div>


            </main>
            
                <aside class="col-md-4 sidebar">
    
<div class="widget">
    <h3 class="title">
        关注我
    </h3>
    <div class="content follow_me">
        
        <a href="//github.com/geekeren" rel="external nofollow" title="github" target="_blank" class="github">
            <i class="github fa fa-github"></i>
        </a>
        
        <a href="mailto:me@mail.wangbaiyuan.cn" rel="external nofollow" title="email" target="_blank" class="email">
            <i class="envelope-o fa fa-envelope-o"></i>
        </a>
        
        <a href="//weibo.com/3734351975" rel="external nofollow" title="weibo" target="_blank" class="weibo">
            <i class="weibo fa fa-weibo"></i>
        </a>
        
        <a href="/atom.xml" rel="external nofollow" title="rss" target="_blank" class="rss">
            <i class="feed fa fa-feed"></i>
        </a>
        
    </div>
</div>


    
    <div class="widget">
        <h3 class="title">
            订阅微信公众号
        </h3>
        <div class="content subscribe_wechat">
            <div>
                <img
                        width="200"
                        src="/img/wechat.jpg" alt="扫一扫关注<br/>
《我是极客人》微信公众号
"
                />
            </div>
            <div>
                扫一扫关注<br/>
《我是极客人》微信公众号

            </div>
        </div>
    </div>


</aside>


<aside id="article-toc" role="navigation" class="col-md-4 sidebar scroll-fix">
    <div class="widget">
        <h3 class="title">
            文章目录
        </h3>
        
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BEAPI%E5%AE%9A%E4%BD%8D%E5%81%8F%E7%A7%BB%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-text">百度地图API定位偏移的原因</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9D%90%E6%A0%87%E4%BD%93%E7%B3%BB"><span class="toc-text">一、坐标体系</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%A7%8D%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-text">第一种分类：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-text">第二种分类：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2"><span class="toc-text">二、坐标转换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E5%BA%A6%E5%88%86%E7%A7%92%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2%E4%B8%BA%E7%BB%8F%E7%BA%AC%E5%BA%A6"><span class="toc-text">1、度分秒坐标转换为经纬度</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81-GPS%E8%BD%AC%E6%8D%A2%E4%B8%BAGCJ-02%E5%9D%90%E6%A0%87"><span class="toc-text">2、 GPS转换为GCJ-02坐标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81GCJ-02%E4%B8%8EBD-09%E4%B9%8B%E9%97%B4%E4%BA%92%E8%BD%AC"><span class="toc-text">3、GCJ-02与BD-09之间互转</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E7%BB%8F%E7%BA%AC%E7%BA%AC%E5%BA%A6%E8%BD%AC%E6%88%90%E5%A2%A8%E5%8D%A1%E6%89%98"><span class="toc-text">4、经纬纬度转成墨卡托</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BEAPI%E4%BD%8D%E7%BD%AE%E5%81%8F%E7%A7%BB%E7%9A%84%E6%A0%A1%E5%87%86%E7%AE%97%E6%B3%95"><span class="toc-text">百度地图API位置偏移的校准算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#C-%E7%AE%97%E6%B3%95"><span class="toc-text">C++算法</span></a></li></ol></li></ol>
        
    </div>
</aside>



            
        </div>
    </div>
</section>
<footer class="main-footer">
    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <span>&copy;
                    2014 - 2024
                    <a href="https://baiyuan.wang" target="_blank">王柏元的博客</a>
                    <a href="//beian.miit.gov.cn/" target="_blank" rel="nofollow">
                        鄂ICP备2022019264号-1</a>
                    
                </span>|
                <span>
                   
    <script
            type="text/javascript"
            src="https://s4.cnzz.com/z_stat.php?id=1254162355&web_id=1254162355"
    >
    </script>





                </span>|
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span>|
                <span>
                    Theme by <a href="https://github.com/geekeren/hexo-theme-snippet-pro" class="copyright-links"
                                target="_blank" rel="nofollow">Snippet Pro</a>
                </span>
            </div>
        </div>
    </div>
</div>




<script src="/js/app.js?rev=@@hash.js"></script>


    

    <a id="back-to-top" class="icon-btn hide">
        <i class="fa fa-chevron-up"></i>
    </a>
</footer>

</body>
</html>
